{%extends "layout.html"%}
{%block contentBackground%}
{% if session['id'] %}
<div>
  <h2>{{subjectCode}}   {{subjectName}}</h2>
</div>
<div>
  <script>
    function toggleGrouping() {
      var x = document.getElementById("groupingSection")
      var y = document.getElementById("groupingButtonImg");
      if (x.style.display === "none") {
        x.style.display = "block";
        y.src = "/static/img/up-arrow.png";
      } else {
        x.style.display = "none";
        y.src = "/static/img/down-arrow.png";
      }
    function toggleStudentGrouping(){
      var x = document.querySelectorAll(".studentName");
      var y = document.getElementById("studentGroupArrowbtn");
      if (x.style.display === "none") {
        x.style.display = "block";
        y.src = "/static/img/up-arrow.png";
      } else {
        x.style.display = "none";
        y.src = "/static/img/down-arrow.png";
      }
    }
    }
  </script>
  <h3 id="title">Student Group</h3>
  <div id="groupingHeader">
    <button onclick="toggleGrouping()"><img src="/static/img/up-arrow.png" alt="arrow" id="groupingButtonImg" style="width: 20px; height: 20px;"></button>
    <div id="groupingTitle">Grouping for {{courseSection}}</div>
    <div id="exportGroupingbtn"><button value="exportAllGrouping">Export All</button></div>
  </div>
  <div id="groupingSection"> <!--TODO: Make it collapsed before clicking-->
    {% for group in studentGroups %}
    <button data-bs-toggle="collapse" type="button" data-bs-target=".studentName" class="grouping">
      <h4>Group {{group[0]}}</h4>
    </button>
    <table class=" table collapse studentName">
      <thead>
        <tr>
          <th>Student ID</th>
          <th>Student Name</th>
        </tr>
      </thead>
      
      
      <tbody>
        {% for i in range(1, group|length) %}
        <tr>
          <td class="studentData">{{group[i][0]}}</td>
          <td class="studentData">{{group[i][1]}}</td>
        </tr>
        {% endfor %}
      </tbody>
      
    </table>
    {% endfor %}
  </div>
</div>
{% endif %}
{%endblock%}