{%extends "layout.html"%}
{%block contentBackground%}
{% if session['id'] %}
<div>
  <h2>{{subjectCode}}   {{subjectName}}</h2>
</div>
<div>
  <script>
    function toggleGrouping() {
      var x = document.getElementById("groupingSection")
      var y = document.getElementById("groupingButtonImg");
      if (x.style.display === "none") {
        x.style.display = "block";
        y.src = "/static/img/up-arrow.png";
      } else {
        x.style.display = "none";
        y.src = "/static/img/down-arrow.png";
      }
    function toggleStudentGrouping(){
      var x = document.querySelectorAll(".studentName");
      var y = document.getElementById("studentGroupArrowbtn");
      if (x.style.display === "none") {
        x.style.display = "block";
        y.src = "/static/img/up-arrow.png";
      } else {
        x.style.display = "none";
        y.src = "/static/img/down-arrow.png";
      }
    }
    }
  </script>
  <h3 id="title">Student Group</h3>
  <div id="groupingHeader">
    <button onclick="toggleGrouping()"><img src="/static/img/up-arrow.png" alt="arrow" id="groupingButtonImg" style="width: 20px; height: 20px;"></button>
    <div id="groupingTitle">Grouping for {{courseSection}}</div>
    <div id="exportGroupingbtn"><button value="exportAllGrouping"><b>Export All</b></button></div>
  </div>
  <div id="groupingSection"> <!--TODO: Make it collapsed before clicking-->
    {% for group in studentGroups %}
    <button data-bs-toggle="collapse" type="button" data-bs-target=".studentName" class="grouping">
      <h4>Group {{group[0]}}</h4>
    </button>
      {% for i in range(1, group|length) %}
          <h5 class="collapse studentName">
          ID:{{group[i][0]}}
          <br>
          Name:{{group[i][1]}}
          </h5>
      {% endfor %}
    {% endfor %}
  </div>
</div>
{% endif %}
{%endblock%}